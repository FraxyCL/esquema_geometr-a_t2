<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mapa de OAs - GeometrÃ­a (con relaciones)</title>
  <style>
    body {
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
      font-family: Arial, sans-serif;
      overflow: auto; 
    }

    .container {
      display: flex;
      flex-direction: column;
      gap: 14px;
      width: max-content; 
      position: relative;
    }

    .fila {
      display: flex;
      align-items: center;
    }

    .curso {
      background: #4a90e2;
      color: #fff;
      padding: 12px 14px;
      border-radius: 10px;
      cursor: pointer;
      font-weight: bold;
      text-align: center;
      transition: background 0.25s ease;
      width: 160px;
      flex-shrink: 0;
      user-select: none;
    }
    .curso:hover { background: #357abd; }

    .oas-container {
      display: none;
      margin-left: 20px;
      gap: 10px;
      align-items: center;
      flex-wrap: nowrap;
    }
    .oas-container.show { display: flex; }

    .oa {
      background: #ffcc00;
      padding: 8px 12px;
      border-radius: 8px;
      box-shadow: 2px 2px 5px rgba(0,0,0,0.18);
      white-space: nowrap;
      cursor: pointer;
      user-select: none;
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.2s ease;
      flex-shrink: 0;
      position: relative;
      z-index: 2; 
    }
    .oa:hover {
      transform: translateY(-1px);
      box-shadow: 3px 3px 8px rgba(0,0,0,0.22);
    }

  
    .rel-figuras { background:#ff6666 !important; color:#fff; }
    .rel-medicion { background:#66cc66 !important; color:#fff; }
    .rel-transform { background:#6699ff !important; color:#fff; }

   
    .panel-rel {
      position: fixed;
      right: 18px;
      top: 10px;  
      background: #fff;
      border: 1px solid #ddd;
      border-radius: 10px;
      padding: 12px;
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      z-index: 1200;
    }
    .panel-rel h4 { margin: 0 0 8px 0; font-size: 14px; color:#333; }
    .panel-rel button {
      display:block;
      margin: 6px 0;
      padding: 8px 10px;
      width: 200px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      color: #fff;
      font-weight: 700;
    }
    .btn-fig { background: #ff6666; }
    .btn-med { background: #66cc66; color:#063; }
    .btn-tr { background: #6699ff; }


    #panelHabilidades {
      top: 247px; 
    }
    #panelHabilidades button { width: 200px; margin:4px 0; }
    
    
    #panelSecuencia { top: 520px; }
    #panelSecuencia button { width: 200px; margin:4px 0; }

  
    #svg-rel { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none; }

    .backdrop {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.15);
      display: none;
      z-index: 999;
    }
    .backdrop.show { display: block; }

    .popover {
      position: absolute;
      max-width: min(520px, 90vw);
      background: #fff;
      border: 1px solid #4a90e2;
      border-radius: 10px;
      padding: 14px;
      box-shadow: 0 6px 18px rgba(0,0,0,0.25);
      z-index: 1300;
      display: none;
    }
    .popover.show { display: block; }
    .popover h3 {
      margin: 0 0 8px 0;
      font-size: 1.05rem;
      color: #1f3b66;
    }
    .popover .close {
      margin-top: 10px;
      background: #4a90e2;
      color: #fff;
      border: none;
      padding: 6px 10px;
      border-radius: 6px;
      cursor: pointer;
    }

    
    footer {
      background: #1f3b66;
      color: #fff;
      padding: 12px 20px;
      text-align: center;
      font-size: 0.9rem;
      line-height: 1.4;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <h1>Mapa Interactivo de OAs â€” GeometrÃ­ağŸ“</h1>
  <p style="margin-top:-8px;color:#333333">ğŸ”¶Haz clic en un curso para ver sus OAs y luego haz clic en un â€œOA Xâ€ para ver el objetivo en profundidad.</p>
  <p style="margin-top:-8px;color:#333333">ğŸ”·Usa los paneles de la derecha para ver las relaciones, habilidades y visualizar el cambio de OAs.</p>
  <p style="margin-top:-8px;color:#333333">ğŸ”¶Puede revisar los OAs de cada curso en: <a href="pdf/Solo OAs de 5 a IV medio.pdf" target="_blank">Solo OAs</a></p>
  <p style="margin-top:-8px;color:#333333">ğŸ”·Puede ver la recopilaciÃ³n del Curriculum del eje de GeometrÃ­a en: <a href="pdf/oas_hab_acti_geo.pdf" target="_blank">Documento Completo</a></p>
  <p style="margin-top:-8px;color:#333333">ğŸ”¶Los cambios realizados y argumentaciÃ³n puedes encontrarla en: <a href="pdf/cambios_esquema.pdf" target="_blank">Cambios</a></p>
  

  
  <svg id="svg-rel"></svg>

  <div class="container" id="mainContainer">
   
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-5b')">5Â° BÃ¡sico</div>
      <div class="oas-container" id="oas-5b" data-curso="5Â° BÃ¡sico">
        <div class="oa" data-uid="5Â° BÃ¡sico|OA 16">5Â° OA 16</div>
        <div class="oa" data-uid="5Â° BÃ¡sico|OA 17">5Â° OA 17</div>
        <div class="oa" data-uid="5Â° BÃ¡sico|OA 18">5Â° OA 18</div>
      </div>
    </div>

    
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-6b')">6Â° BÃ¡sico</div>
      <div class="oas-container" id="oas-6b" data-curso="6Â° BÃ¡sico">
        <div class="oa" data-uid="6Â° BÃ¡sico|OA 12">6Â° OA 12</div>
        <div class="oa" data-uid="6Â° BÃ¡sico|OA 13">6Â° OA 13</div>
        <div class="oa" data-uid="6Â° BÃ¡sico|OA 14">6Â° OA 14</div>
        <div class="oa" data-uid="6Â° BÃ¡sico|OA 15">6Â° OA 15</div>
        <div class="oa" data-uid="6Â° BÃ¡sico|OA 16">6Â° OA 16</div>
        <div class="oa" data-uid="6Â° BÃ¡sico|OA 17">6Â° OA 17</div>
      </div>
    </div>

   
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-7b')">7Â° BÃ¡sico</div>
      <div class="oas-container" id="oas-7b" data-curso="7Â° BÃ¡sico">
        <div class="oa" data-uid="7Â° BÃ¡sico|OA 10">7Â° OA 10</div>
        <div class="oa" data-uid="7Â° BÃ¡sico|OA 11">7Â° OA 11</div>
        <div class="oa" data-uid="7Â° BÃ¡sico|OA 12">7Â° OA 12</div>
        <div class="oa" data-uid="7Â° BÃ¡sico|OA 13">7Â° OA 13</div>
        <div class="oa" data-uid="7Â° BÃ¡sico|OA 14">7Â° OA 14</div>
      </div>
    </div>

    
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-8b')">8Â° BÃ¡sico</div>
      <div class="oas-container" id="oas-8b" data-curso="8Â° BÃ¡sico">
        <div class="oa" data-uid="8Â° BÃ¡sico|OA 11">8Â° OA 11</div>
        <div class="oa" data-uid="8Â° BÃ¡sico|OA 12">8Â° OA 12</div>
        <div class="oa" data-uid="8Â° BÃ¡sico|OA 13">8Â° OA 13</div>
        <div class="oa" data-uid="8Â° BÃ¡sico|OA 14">8Â° OA 14</div>
      </div>
    </div>

    
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-1m')">IÂ° Medio</div>
      <div class="oas-container" id="oas-1m" data-curso="IÂ° Medio">
        <div class="oa" data-uid="IÂ° Medio|OA 6">IÂ° OA 6</div>
        <div class="oa" data-uid="IÂ° Medio|OA 7">IÂ° OA 7</div>
        <div class="oa" data-uid="IÂ° Medio|OA 8">IÂ° OA 8</div>
        <div class="oa" data-uid="IÂ° Medio|OA 9">IÂ° OA 9</div>
        <div class="oa" data-uid="IÂ° Medio|OA 10">IÂ° OA 10</div>
        <div class="oa" data-uid="IÂ° Medio|OA 11">IÂ° OA 11</div>
      </div>
    </div>

    
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-2m')">IIÂ° Medio</div>
      <div class="oas-container" id="oas-2m" data-curso="IIÂ° Medio">
        <div class="oa" data-uid="IIÂ° Medio|OA 7">IIÂ° OA 7</div>
        <div class="oa" data-uid="IIÂ° Medio|OA 8">IIÂ° OA 8</div>
        <div class="oa" data-uid="IIÂ° Medio|OA 9">IIÂ° OA 9</div>
      </div>
    </div>

   
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-3mfg')">IIIÂ° Medio FG</div>
      <div class="oas-container" id="oas-3mfg" data-curso="IIIÂ° Medio FG">
        <div class="oa" data-uid="IIIÂ° Medio FG|OAC04">IIIÂ° OAC04</div>
      </div>
    </div>

   
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-4mfg')">IVÂ° Medio FG</div>
      <div class="oas-container" id="oas-4mfg" data-curso="IVÂ° Medio FG">
        <div class="oa" data-uid="IVÂ° Medio FG|OAC04">IVÂ° OAC04</div>
      </div>
    </div>

    
    <div class="fila">
      <div class="curso" onclick="toggleOAs('oas-4mhc')">GeometrÃ­a 3D</div>
      <div class="oas-container" id="oas-4mhc" data-curso="GeometrÃ­a 3D">
        <div class="oa" data-uid="GeometrÃ­a 3D|OAC01">G3D OAC01</div>
        <div class="oa" data-uid="GeometrÃ­a 3D|OAC02">G3D OAC02</div>
        <div class="oa" data-uid="GeometrÃ­a 3D|OAC03">G3D OAC03</div>
        <div class="oa" data-uid="GeometrÃ­a 3D|OAC04">G3D OAC04</div>
        <div class="oa" data-uid="GeometrÃ­a 3D|OAC05">G3D OAC05</div>
      </div>
    </div>
  </div>

  
  <div class="panel-rel" id="panelRel">
    <h4>Relaciones entre OAs</h4>
    <button class="btn-fig" onclick="toggleRelationship('figuras')">âœ…Figuras y sus propiedades</button>
    <button class="btn-med" onclick="toggleRelationship('medicion')">ğŸ“MediciÃ³n y cÃ¡lculo</button>
    <button class="btn-tr" onclick="toggleRelationship('transform')">â—½Transformaciones y representaciones</button>
    <button style="background:#000000;" onclick="clearAllRelations()">ğŸ§¹Limpiar relaciones</button>
  </div>

 
  <div class="panel-rel" id="panelHabilidades">
    <h4>Habilidades entre OAs</h4>
    <button style="background:#F73EBE;" onclick="highlightBySkill('argumentar')">ğŸ—£ï¸Argumentar y Comunicar</button>
    <button style="background:#716FC9;" onclick="highlightBySkill('representar')">ğŸ§±Representar</button>
    <button style="background:#F03E73;" onclick="highlightBySkill('resolver')">ğŸ”Resolver problemas</button>
    <button style="background:#76CC5A;" onclick="highlightBySkill('modelar')">âš™ï¸Modelar</button>
    <button style="background:#B56D48;" onclick="highlightBySkill('digital')">ğŸ–¥ï¸Habilidades digitales</button>
    <button style="background:#000000;" onclick="clearSkillHighlights()">ğŸ§¹Limpiar habilidades</button>
  </div>


  <div class="panel-rel" id="panelSecuencia">
    <h4>Secuencia (mover OAs)</h4>
    <button style="background:#9C109E;" onclick="aplicarSecuencia()">ğŸ”„Cambio de OAs</button>
  </div>

 
  <div class="backdrop" id="backdrop"></div>
  <div class="popover" id="popover" role="dialog" aria-modal="true">
    <h3 id="popover-title">Detalle del OA</h3>
    <div id="popover-content" style="line-height:1.4"></div>
    <button class="close" onclick="closePopover()">Cerrar</button>
  </div>

  <footer style=" background: #1f3b66; color: #fff; padding: 12px 20px; text-align: center; font-size: 0.9rem; line-height: 1.4; margin-top: 30px;">
    <p>&copy; 2025 - Michael Antonio NÃºÃ±ez NÃºÃ±ez ğŸ‘¨ğŸ»â€ğŸ«- Taller de herramientas didÃ¡cticas 2 - PLEMC USACH</p>
  </footer>

  <script>
    
    const oasFullText = {

      "5Â° BÃ¡sico": {
        "OA 16": `Identificar y dibujar puntos en el primer cuadrante del plano cartesiano, dadas sus coordenadas en nÃºmeros naturales.
        â­Actitud priorizada: Actitud A (trabajo ordenado y metÃ³dico)`,
        "OA 17": `Describir y dar ejemplos de aristas y caras de figuras 3D y lados de figuras 2D:
- Que se intersectan 
- Que son perpendiculares.
        â­Actitud priorizada: Actitud C (curiosidad e interÃ©s)`,
        "OA 18": `Demostrar que comprenden el concepto de congruencia, usando la traslaciÃ³n, la reflexiÃ³n y la rotaciÃ³n en cuadrÃ­culas y mediante software geomÃ©trico.
        â­Actitud priorizada: Actitud B (flexibilidad y creatividad en la bÃºsqueda de soluciones)`
      },

      "6Â° BÃ¡sico": {
        "OA 12": `Construir y comparar triÃ¡ngulos de acuerdo a la medida de sus lados y /o sus Ã¡ngulos con instrumentos geomÃ©tricos o software geomÃ©trico.
        â­Actitud priorizada: Actitud E (esfuerzo y perseverancia)`,
        "OA 13": `Demostrar que comprenden el concepto de Ã¡rea de una superficie en cubos y paralelepÃ­pedos, calculando el Ã¡rea de sus redes (plantillas) asociadas.
        â­Actitud priorizada: Actitud A (ordenado y metÃ³dico)`,
        "OA 14": `Realizar teselados de figuras 2D usando traslaciones, reflexiones y rotaciones.
        â­Actitud priorizada:Actitud B (flexibilidad y creatividad)`,
        "OA 15": `Construir Ã¡ngulos agudos, obtusos, rectos, extendidos y completos con instrumentos geomÃ©tricos o software geomÃ©trico.
        â­Actitud priorizada: Actitud D (actitud positiva frente a sus capacidades)`,
        "OA 16": `Identificar los Ã¡ngulos que se forman entre dos rectas que se cortan (pares de Ã¡ngulos opuestos por el vÃ©rtice y pares de Ã¡ngulos complementarios).
        â­Actitud priorizada: Actitud C (curiosidad e interÃ©s por aprender matemÃ¡ticas)`,
        "OA 17": `Demostrar de manera concreta, pictÃ³rica y simbÃ³lica que la suma de los Ã¡ngulos interiores de un triÃ¡ngulo es 180Âº y de un cuadrilÃ¡tero es 360Âº.
        â­Actitud priorizada:`
      },

      "7Â° BÃ¡sico":{
        "OA 10": `Descubrir relaciones que involucran Ã¡ngulos exteriores o interiores de diferentes polÃ­gonos.
        â­Actitud priorizada: Actitud C (esfuerzo, perseverancia y rigor)`,
        "OA 11": `Mostrar que comprenden el cÃ­rculo:
- Describiendo las relaciones entre el radio, el diÃ¡metro y el perÃ­metro del cÃ­rculo.
- Estimando de manera intuitiva el perÃ­metro y el Ã¡rea de un cÃ­rculo.
- Aplicando las aproximaciones del perÃ­metro y del Ã¡rea en la resoluciÃ³n de problemas.
- GeomÃ©tricos de otras asignaturas y de la vida diaria. 
- IdentificÃ¡ndolo como lugar geomÃ©trico.
        â­Actitud priorizada: Actitud B (curiosidad e interÃ©s por resolver desafÃ­os)`,
        "OA 12": `Construir objetos geomÃ©tricos de manera manual y/o con software educativo: 
- LÃ­neas, como las perpendiculares, las paralelas, las bisectrices y alturas en triÃ¡ngulos y cuadrilÃ¡teros.
- Puntos, como el punto medio de un segmento, el centro de gravedad, el centro del cÃ­rculo inscrito y del circunscrito de un triÃ¡ngulo. 
- TriÃ¡ngulos y cuadrilÃ¡teros congruentes.
        â­Actitud priorizada: Actitud D (trabajo en equipo responsable y proactivo)`,
        "OA 13": `Desarrollar y aplicar la fÃ³rmula del Ã¡rea de triÃ¡ngulos, paralelogramos y trapecios.
        â­Actitud priorizada: Actitud A (flexibilidad y creatividad en la bÃºsqueda de soluciones)`,
        "OA 14": `Identificar puntos en el plano cartesiano, usando pares ordenados y vectores de forma concreta (juegos) y pictÃ³rica.
        â­Actitud priorizada: Actitud E (actitud crÃ­tica frente a la informaciÃ³n matemÃ¡tica)`
      },
      
      "8Â° BÃ¡sico":{
        "OA 11": `Desarrollar las fÃ³rmulas para encontrar el Ã¡rea de superficies y el volumen de prismas rectos con diferentes bases y cilindros:
- Estimando de manera intuitiva Ã¡rea de superficie y volumen.
- Desplegando la red de prismas rectos para encontrar la fÃ³rmula del Ã¡rea de superficie aplicando las aproximaciones del perÃ­metro y del Ã¡rea en la resoluciÃ³n de problemas. 
- Aplicando las aproximaciones del perÃ­metro y del Ã¡rea en la resoluciÃ³n de problemas. 
- Aplicando las fÃ³rmulas a la resoluciÃ³n de problemas geomÃ©tricos y de la vida diaria.
        â­Actitud priorizada: Actitud C (esfuerzo, perseverancia y rigor)`,
        "OA 12": `Explicar, de manera concreta, pictÃ³rica y simbÃ³lica, la validez del teorema de PitÃ¡goras y aplicar a la resoluciÃ³n de problemas geomÃ©tricos y de la vida cotidiana, de manera manual y/o con software educativo.
        â­Actitud priorizada: Actitud B (curiosidad e interÃ©s por resolver desafÃ­os matemÃ¡ticos)`,
        "OA 13": `Describir la posiciÃ³n y el movimiento (traslaciones, rotaciones y reflexiones) de figuras 2D, de manera manual y/o con software educativo, utilizando:
- Los vectores para la traslaciÃ³n.
- Los ejes del plano cartesiano como ejes de reflexiÃ³n. 
- Los puntos del plano para las rotaciones.
        â­Actitud priorizada: Actitud F (uso responsable de tecnologÃ­as de comunicaciÃ³n)`,
        "OA 14": `Componer rotaciones, traslaciones y reflexiones en el plano cartesiano y en el espacio, de manera manual y/o con software educativo, y aplicar a las simetrÃ­as de polÃ­gonos y poliedros, y a la resoluciÃ³n de problemas geomÃ©tricos relacionados con el arte.
        â­Actitud priorizada: Actitud A (flexibilidad y creatividad)`
      },

      "IÂ° Medio":{
        "OA 6": `Desarrollar la fÃ³rmula de los valores del Ã¡rea y del perÃ­metro de sectores y segmentos circulares, respectivamente, a partir de Ã¡ngulos centrales de 60Â°, 90Â°, 120Â° y 180Â°, por medio de representaciones concretas.
        â­Actitud priorizada: Actitud C (esfuerzo, perseverancia y rigor)`,
        "OA 7": `Desarrollar las fÃ³rmulas para encontrar el Ã¡rea de la superficie y el volumen del cono:
- Desplegando la red del cono para la fÃ³rmula del Ã¡rea de superficie.
- Experimentando de manera concreta para encontrar la relaciÃ³n entre el volumen del cilindro y el cono.
- Aplicando las fÃ³rmulas a la resoluciÃ³n de problemas geomÃ©tricos y de la vida diaria.
        â­Actitud priorizada: Actitud B (curiosidad e interÃ©s por resolver desafÃ­os)`,
        "OA 8": `Mostrar que comprenden el concepto de homotecia:
- RelacionÃ¡ndola con la perspectiva, el funcionamiento de instrumentos Ã³pticos y el ojo humano.
- Midiendo segmentos adecuados para determinar las propiedades de la homotecia. 
- Aplicando propiedades de la homotecia en la construcciÃ³n de objetos, de manera manual y/o con software educativo. 
- Resolviendo problemas de la vida cotidiana y de otras asignaturas.
        â­Actitud priorizada: Actitud A (flexibilidad y creatividad)`,
        "OA 9": `Desarrollar el teorema de Tales mediante las propiedades de la homotecia, para aplicarlo en la resoluciÃ³n de problemas.
        â­Actitud priorizada: Actitud E (actitud crÃ­tica frente a evidencias matemÃ¡ticas)`,
        "OA 10": `Aplicar propiedades de semejanza y de proporcionalidad a modelos a escala y otras situaciones de la vida diaria y otras asignaturas.
        â­Actitud priorizada: Actitud D (trabajo en equipo responsable y proactivo)`,
        "OA 11": `Representar el concepto de homotecia de forma vectorial, relacionÃ¡ndolo con el producto de un vector por un escalar, de manera manual y/o con software educativo.
        â­Actitud priorizada: Actitud F (uso responsable de tecnologÃ­as)`
      },

      "IIÂ° Medio":{
        "OA 7": `Desarrollar las fÃ³rmulas del Ã¡rea de la superficie y del volumen de la esfera:
- Conjeturando la fÃ³rmula.
- Representando de manera concreta y simbÃ³lica, de manera manual y/o con software educativo.
- Resolviendo problemas de la vida diaria y de geometrÃ­a.
        â­Actitud priorizada: Actitud C (esfuerzo, perseverancia y rigor)`,
        "OA 8": `Mostrar que comprenden las razones trigonomÃ©tricas de seno, coseno y tangente en triÃ¡ngulos rectÃ¡ngulos:
- RelacionÃ¡ndolas con las propiedades de la semejanza y los Ã¡ngulos. 
- ExplicÃ¡ndolas de manera pictÃ³rica y simbÃ³lica, de manera manual y/o con software educativo. 
- AplicÃ¡ndolas para determinar Ã¡ngulos o medidas de lados. 
- Resolviendo problemas geomÃ©tricos y de otras asignaturas.
        â­Actitud priorizada: Actitud B (curiosidad e interÃ©s por resolver desafÃ­os)`,
        "OA 9": `Aplicar las razones trigonomÃ©tricas en diversos contextos, en la composiciÃ³n y descomposiciÃ³n de vectores y determinar las proyecciones de vectores.
        â­Actitud priorizada: Actitud E (actitud crÃ­tica frente a la informaciÃ³n matemÃ¡tica)`
      },

      "IIIÂ° Medio FG":{
        "OAC04":`Resolver problemas de geometrÃ­a euclidiana que involucran relaciones mÃ©tricas entre Ã¡ngulos, arcos, cuerdas y secantes en la circunferencia, de forma manuscrita y con uso de herramientas tecnolÃ³gicas.
        â­Actitud priorizada: Actitud C (esfuerzo, perseverancia y rigor)`
      },

      "IVÂ° Medio FG":{
        "OAC04": `Resolver problemas acerca de rectas y circunferencias en el plano, mediante su representaciÃ³n analÃ­tica, de forma manuscrita y con uso de herramientas tecnolÃ³gicas.
        â­Actitud priorizada: Actitud E (actitud crÃ­tica al evaluar evidencias matemÃ¡ticas)`
      },

      "GeometrÃ­a 3D":{
        "OAC01": `Argumentar acerca de la validez de soluciones a situaciones que involucren isometrÃ­as y homotecias en el plano, haciendo uso de vectores y de representaciones digitales.
        â­Actitud priorizada: Actitud E (actitud crÃ­tica frente a evidencias matemÃ¡ticas)`,
        "OAC02": `Resolver problemas que involucren puntos, rectas y planos en el espacio 3D, haciendo uso de vectores e incluyendo representaciones digitales.
        â­Actitud priorizada: Actitud C (esfuerzo, perseverancia y rigor)`,
        "OAC03": `Resolver problemas que involucren relaciones entre figuras 3D y 2D en las que intervengan vistas, cortes, proyecciones en el plano o la inscripciÃ³n de figuras 3D en otras figuras tridimensionales.
        â­Actitud priorizada: Actitud D (trabajo en equipo responsable y proactivo)`,
        "OAC04": `Formular y verificar conjeturas acerca de la forma, Ã¡rea y volumen de figuras 3D generadas por rotaciÃ³n o traslaciÃ³n de figuras planas en el espacio, incluyendo el uso de herramientas tecnolÃ³gicas digitales.
        â­Actitud priorizada: Actitud B (curiosidad e interÃ©s por resolver desafÃ­os matemÃ¡ticos)`,
        "OAC05": `DiseÃ±ar propuestas y resolver problemas relacionados con perspectiva, proyecciÃ³n paralela y central, puntos de fuga y elevaciones, tanto en arte como en arquitectura, diseÃ±o o construcciÃ³n, aplicando conceptos y procedimientos de la geometrÃ­a 3D.
        â­Actitud priorizada: Actitud A (flexibilidad y creatividad en la bÃºsqueda de soluciones)`
      }
    };

    
    const oasByUID = {};
    Object.keys(oasFullText).forEach(course => {
      Object.keys(oasFullText[course]).forEach(oa => {
        const uid = `${course}|${oa}`;
        oasByUID[uid] = oasFullText[course][oa];
      });
    });

    const backdrop = document.getElementById('backdrop');
    const popover  = document.getElementById('popover');
    const popTitle = document.getElementById('popover-title');
    const popBody  = document.getElementById('popover-content');

  
    function showPopoverForOA(oaEl) {
      const uid = oaEl.dataset.uid || '';
      const [courseName, oaName] = uid.split('|');
      popTitle.textContent = (oaName ? `${oaName} â€” ${courseName}` : oaEl.textContent.trim());
      const fullText = oasByUID[uid] || `AquÃ­ irÃ¡ el texto completo de ${oaEl.textContent.trim()} de ${courseName || ''}.`;
      popBody.innerHTML = fullText.replace(/\n/g,'<br>');
      const r = oaEl.getBoundingClientRect();
      const left = r.right + window.scrollX + 12;
      const top  = r.top   + window.scrollY - 6;
      popover.style.left = left + 'px';
      popover.style.top  = top  + 'px';
      backdrop.classList.add('show');
      popover.classList.add('show');
    }

    function closePopover() {
      backdrop.classList.remove('show');
      popover.classList.remove('show');
    }

    backdrop.addEventListener('click', closePopover);
    window.addEventListener('keydown', (e) => { if (e.key === 'Escape') closePopover(); });

   
    document.addEventListener('click', (e) => {
      const oa = e.target.closest('.oa');
      if (oa) {
        showPopoverForOA(oa);
      }
    });

    
    const relationships = {
      figuras: [
        {from:{course:"6Â° BÃ¡sico",oa:"OA 12"}, to:{course:"6Â° BÃ¡sico",oa:"OA 16"}},
        {from:{course:"6Â° BÃ¡sico",oa:"OA 12"}, to:{course:"6Â° BÃ¡sico",oa:"OA 17"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 10"}, to:{course:"7Â° BÃ¡sico",oa:"OA 12"}},
        {from:{course:"IIÂ° Medio",oa:"OA 8"}, to:{course:"IIÂ° Medio",oa:"OA 9"}},
        {from:{course:"5Â° BÃ¡sico",oa:"OA 17"}, to:{course:"6Â° BÃ¡sico",oa:"OA 12"}},
        {from:{course:"5Â° BÃ¡sico",oa:"OA 17"}, to:{course:"6Â° BÃ¡sico",oa:"OA 17"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 10"}, to:{course:"IÂ° Medio",oa:"OA 9"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 11"}, to:{course:"IÂ° Medio",oa:"OA 10"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 12"}, to:{course:"IÂ° Medio",oa:"OA 11"}},
        {from:{course:"IÂ° Medio",oa:"OA 10"}, to:{course:"IIÂ° Medio",oa:"OA 8"}},
        {from:{course:"IIIÂ° Medio FG",oa:"OAC04"}, to:{course:"IVÂ° Medio FG",oa:"OAC04"}},
        {from:{course:"GeometrÃ­a 3D",oa:"OAC02"}, to:{course:"GeometrÃ­a 3D",oa:"OAC03"}}
      ],
      medicion: [
        {from:{course:"6Â° BÃ¡sico",oa:"OA 13"}, to:{course:"6Â° BÃ¡sico",oa:"OA 12"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 13"}, to:{course:"7Â° BÃ¡sico",oa:"OA 10"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 13"}, to:{course:"7Â° BÃ¡sico",oa:"OA 12"}},
        {from:{course:"IÂ° Medio",oa:"OA 6"}, to:{course:"IÂ° Medio",oa:"OA 7"}},
        {from:{course:"IIÂ° Medio",oa:"OA 7"}, to:{course:"IIÂ° Medio",oa:"OA 8"}},
        {from:{course:"IIÂ° Medio",oa:"OA 7"}, to:{course:"IIÂ° Medio",oa:"OA 9"}},
        {from:{course:"6Â° BÃ¡sico",oa:"OA 13"}, to:{course:"8Â° BÃ¡sico",oa:"OA 11"}},
        {from:{course:"7Â° BÃ¡sico",oa:"OA 13"}, to:{course:"8Â° BÃ¡sico",oa:"OA 11"}},
        {from:{course:"8Â° BÃ¡sico",oa:"OA 11"}, to:{course:"IÂ° Medio",oa:"OA 7"}},
        {from:{course:"8Â° BÃ¡sico",oa:"OA 11"}, to:{course:"IIÂ° Medio",oa:"OA 7"}},
        {from:{course:"IIÂ° Medio",oa:"OA 8"}, to:{course:"GeometrÃ­a 3D",oa:"OAC04"}},
        {from:{course:"IIÂ° Medio",oa:"OA 7"}, to:{course:"GeometrÃ­a 3D",oa:"OAC04"}}
      ],
      transform: [
        {from:{course:"5Â° BÃ¡sico",oa:"OA 16"}, to:{course:"7Â° BÃ¡sico",oa:"OA 14"}},
        {from:{course:"5Â° BÃ¡sico",oa:"OA 18"}, to:{course:"5Â° BÃ¡sico",oa:"OA 18"}},
        {from:{course:"5Â° BÃ¡sico",oa:"OA 18"}, to:{course:"6Â° BÃ¡sico",oa:"OA 14"}},

        {from:{course:"6Â° BÃ¡sico",oa:"OA 14"}, to:{course:"6Â° BÃ¡sico",oa:"OA 15"}},
        {from:{course:"6Â° BÃ¡sico",oa:"OA 14"}, to:{course:"6Â° BÃ¡sico",oa:"OA 17"}},
        {from:{course:"6Â° BÃ¡sico",oa:"OA 14"}, to:{course:"8Â° BÃ¡sico",oa:"OA 14"}},

        {from:{course:"8Â° BÃ¡sico",oa:"OA 13"}, to:{course:"8Â° BÃ¡sico",oa:"OA 14"}},
        {from:{course:"8Â° BÃ¡sico",oa:"OA 13"}, to:{course:"IÂ° Medio",oa:"OA 8"}},

        {from:{course:"IÂ° Medio",oa:"OA 8"}, to:{course:"IÂ° Medio",oa:"OA 9"}},
        {from:{course:"IÂ° Medio",oa:"OA 9"}, to:{course:"IÂ° Medio",oa:"OA 10"}},
        {from:{course:"IÂ° Medio",oa:"OA 10"}, to:{course:"IÂ° Medio",oa:"OA 11"}},
        {from:{course:"IÂ° Medio",oa:"OA 8"}, to:{course:"GeometrÃ­a 3D",oa:"OAC01"}},
        {from:{course:"IÂ° Medio",oa:"OA 10"}, to:{course:"GeometrÃ­a 3D",oa:"OAC05"}},

        {from:{course:"GeometrÃ­a 3D",oa:"OAC01"}, to:{course:"GeometrÃ­a 3D",oa:"OAC05"}},
        {from:{course:"GeometrÃ­a 3D",oa:"OAC01"}, to:{course:"GeometrÃ­a 3D",oa:"OAC02"}},
        
        
      ]
    };

  
    let activeCategory = null;

    
    function findOAElement(courseName, oaLabel) {
      const uid = `${courseName}|${oaLabel}`;
      const all = Array.from(document.querySelectorAll('.oa'));
      return all.find(it => it.dataset.uid === uid) || null;
    }

    
    function ensureContainersOpenForPairs(pairs) {
      pairs.forEach(pair => {
        const openContainer = (pair.from && pair.from.course) ? pair.from.course : null;
        const openContainer2 = (pair.to && pair.to.course) ? pair.to.course : null;
        [openContainer, openContainer2].forEach(courseName => {
          if (!courseName) return;
          const cont = document.querySelector(`.oas-container[data-curso="${courseName}"]`);
          if (cont && !cont.classList.contains('show')) cont.classList.add('show');
        });
      });
    }

   
    function clearAllRelations() {
      activeCategory = null;
      
      document.querySelectorAll('.oa').forEach(el => {
        el.classList.remove('rel-figuras','rel-medicion','rel-transform');
      });
      
      const svg = document.getElementById('svg-rel');
      while (svg.firstChild) svg.removeChild(svg.firstChild);
    }

    
    function drawActiveRelationships() {
      if (!activeCategory) return;
      const pairs = relationships[activeCategory];
      const svg = document.getElementById('svg-rel');

     
      const docW = Math.max(document.documentElement.scrollWidth, document.body.scrollWidth);
      const docH = Math.max(document.documentElement.scrollHeight, document.body.scrollHeight);
      svg.setAttribute('width', docW);
      svg.setAttribute('height', docH);
      svg.style.width = docW + 'px';
      svg.style.height = docH + 'px';

  
      while (svg.firstChild) svg.removeChild(svg.firstChild);

  
      const defs = document.createElementNS('http://www.w3.org/2000/svg','defs');
      const marker = document.createElementNS('http://www.w3.org/2000/svg','marker');
      marker.setAttribute('id','arrow-'+activeCategory);
      marker.setAttribute('markerWidth','10');
      marker.setAttribute('markerHeight','10');
      marker.setAttribute('refX','8');
      marker.setAttribute('refY','3');
      marker.setAttribute('orient','auto');
      const path = document.createElementNS('http://www.w3.org/2000/svg','path');
      path.setAttribute('d','M0,0 L0,6 L9,3 z');
      const color = activeCategory==='figuras' ? '#ff6666' : (activeCategory==='medicion' ? '#66cc66' : '#6699ff');
      path.setAttribute('fill', color);
      marker.appendChild(path);
      defs.appendChild(marker);
      svg.appendChild(defs);

   
      ensureContainersOpenForPairs(pairs);

     
      pairs.forEach(pair => {
        const el1 = findOAElement(pair.from.course, pair.from.oa);
        const el2 = findOAElement(pair.to.course, pair.to.oa);
        if (!el1 || !el2) return;

        
        if (activeCategory === 'figuras') {
          el1.classList.add('rel-figuras'); el2.classList.add('rel-figuras');
        } else if (activeCategory === 'medicion') {
          el1.classList.add('rel-medicion'); el2.classList.add('rel-medicion');
        } else if (activeCategory === 'transform') {
          el1.classList.add('rel-transform'); el2.classList.add('rel-transform');
        }

    
        const r1 = el1.getBoundingClientRect();
        const r2 = el2.getBoundingClientRect();
        const x1 = r1.left + r1.width/2 + window.scrollX;
        const y1 = r1.top + r1.height/2 + window.scrollY;
        const x2 = r2.left + r2.width/2 + window.scrollX;
        const y2 = r2.top + r2.height/2 + window.scrollY;

       
        const line = document.createElementNS('http://www.w3.org/2000/svg','line');
        line.setAttribute('x1', x1);
        line.setAttribute('y1', y1);
        line.setAttribute('x2', x2);
        line.setAttribute('y2', y2);
        line.setAttribute('stroke', color);
        line.setAttribute('stroke-width','2');
        line.setAttribute('marker-end','url(#arrow-'+activeCategory+')');
        svg.appendChild(line);
      });
    }


    function toggleRelationship(cat) {
      if (activeCategory === cat) {
        clearAllRelations();
        return;
      }
      clearAllRelations();
      activeCategory = cat;
      drawActiveRelationships();
    }

   
    window.addEventListener('scroll', () => { if (activeCategory) drawActiveRelationships(); });
    window.addEventListener('resize', () => { if (activeCategory) drawActiveRelationships(); });

    clearAllRelations();

 
  const skillsMap = {
    argumentar: [
    "5Â° BÃ¡sico|OA 17","5Â° BÃ¡sico|OA 18",
    "6Â° BÃ¡sico|OA 12","6Â° BÃ¡sico|OA 13","6Â° BÃ¡sico|OA 14","6Â° BÃ¡sico|OA 15","6Â° BÃ¡sico|OA 16","6Â° BÃ¡sico|OA 17",
    "7Â° BÃ¡sico|OA 10","7Â° BÃ¡sico|OA 11","7Â° BÃ¡sico|OA 12","7Â° BÃ¡sico|OA 13","7Â° BÃ¡sico|OA 14",
    "8Â° BÃ¡sico|OA 11","8Â° BÃ¡sico|OA 12","8Â° BÃ¡sico|OA 13","8Â° BÃ¡sico|OA 14",
    "IÂ° Medio|OA 6","IÂ° Medio|OA 7","IÂ° Medio|OA 8","IÂ° Medio|OA 9","IÂ° Medio|OA 10","IÂ° Medio|OA 11",
    "IIÂ° Medio|OA 7","IIÂ° Medio|OA 8","IIÂ° Medio|OA 9",
    "IIIÂ° Medio FG|OAC04",
    "IVÂ° Medio FG|OAC04",
    "GeometrÃ­a 3D|OAC01","GeometrÃ­a 3D|OAC02","GeometrÃ­a 3D|OAC03","GeometrÃ­a 3D|OAC04","GeometrÃ­a 3D|OAC05"
    ],
    representar: [
      "5Â° BÃ¡sico|OA 16","5Â° BÃ¡sico|OA 17","5Â° BÃ¡sico|OA 18",
      "6Â° BÃ¡sico|OA 12","6Â° BÃ¡sico|OA 13","6Â° BÃ¡sico|OA 14","6Â° BÃ¡sico|OA 15","6Â° BÃ¡sico|OA 16","6Â° BÃ¡sico|OA 17",
      "7Â° BÃ¡sico|OA 10","7Â° BÃ¡sico|OA 11","7Â° BÃ¡sico|OA 12","7Â° BÃ¡sico|OA 13","7Â° BÃ¡sico|OA 14",
      "8Â° BÃ¡sico|OA 11","8Â° BÃ¡sico|OA 12","8Â° BÃ¡sico|OA 13","8Â° BÃ¡sico|OA 14",
      "IÂ° Medio|OA 6","IÂ° Medio|OA 7","IÂ° Medio|OA 8","IÂ° Medio|OA 9","IÂ° Medio|OA 10","IÂ° Medio|OA 11",
      "IIÂ° Medio|OA 7","IIÂ° Medio|OA 8","IIÂ° Medio|OA 9",
      "IIIÂ° Medio FG|OAC04",
      "IVÂ° Medio FG|OAC04",
      "GeometrÃ­a 3D|OAC01","GeometrÃ­a 3D|OAC02","GeometrÃ­a 3D|OAC03","GeometrÃ­a 3D|OAC04","GeometrÃ­a 3D|OAC05"
    ],
    resolver: [
      "5Â° BÃ¡sico|OA 16","5Â° BÃ¡sico|OA 17","5Â° BÃ¡sico|OA 18",
      "6Â° BÃ¡sico|OA 13","6Â° BÃ¡sico|OA 16","6Â° BÃ¡sico|OA 17",
      "7Â° BÃ¡sico|OA 10","7Â° BÃ¡sico|OA 11","7Â° BÃ¡sico|OA 12","7Â° BÃ¡sico|OA 13","7Â° BÃ¡sico|OA 14",
      "8Â° BÃ¡sico|OA 11","8Â° BÃ¡sico|OA 12","8Â° BÃ¡sico|OA 13","8Â° BÃ¡sico|OA 14",
      "IÂ° Medio|OA 6","IÂ° Medio|OA 7","IÂ° Medio|OA 8","IÂ° Medio|OA 9","IÂ° Medio|OA 10","IÂ° Medio|OA 11",
      "IIÂ° Medio|OA 7","IIÂ° Medio|OA 8","IIÂ° Medio|OA 9",
      "IIIÂ° Medio FG|OAC04",
      "IVÂ° Medio FG|OAC04",
      "GeometrÃ­a 3D|OAC01","GeometrÃ­a 3D|OAC02","GeometrÃ­a 3D|OAC03","GeometrÃ­a 3D|OAC04","GeometrÃ­a 3D|OAC05"
    ],
    modelar: [
      "5Â° BÃ¡sico|OA 16","5Â° BÃ¡sico|OA 17",
      "6Â° BÃ¡sico|OA 12","6Â° BÃ¡sico|OA 13","6Â° BÃ¡sico|OA 14","6Â° BÃ¡sico|OA 15","6Â° BÃ¡sico|OA 16","6Â° BÃ¡sico|OA 17",
      "7Â° BÃ¡sico|OA 11","7Â° BÃ¡sico|OA 12","7Â° BÃ¡sico|OA 13","7Â° BÃ¡sico|OA 14",
      "8Â° BÃ¡sico|OA 11","8Â° BÃ¡sico|OA 12","8Â° BÃ¡sico|OA 13","8Â° BÃ¡sico|OA 14",
      "IÂ° Medio|OA 6","IÂ° Medio|OA 7","IÂ° Medio|OA 8","IÂ° Medio|OA 9","IÂ° Medio|OA 10","IÂ° Medio|OA 11",
      "IIÂ° Medio|OA 7","IIÂ° Medio|OA 8","IIÂ° Medio|OA 9",
      "IIIÂ° Medio FG|OAC04",
      "IVÂ° Medio FG|OAC04",
      "GeometrÃ­a 3D|OAC01","GeometrÃ­a 3D|OAC02","GeometrÃ­a 3D|OAC03","GeometrÃ­a 3D|OAC04","GeometrÃ­a 3D|OAC05"
    ],
    digital: [
      "5Â° BÃ¡sico|OA 18",
      "6Â° BÃ¡sico|OA 12","6Â° BÃ¡sico|OA 15",
      "7Â° BÃ¡sico|OA 12",
      "8Â° BÃ¡sico|OA 12","8Â° BÃ¡sico|OA 13","8Â° BÃ¡sico|OA 14",
      "IÂ° Medio|OA 8","IÂ° Medio|OA 11",
      "IIÂ° Medio|OA 7","IIÂ° Medio|OA 8",
      "IIIÂ° Medio FG|OAC04",
      "IVÂ° Medio FG|OAC04",
      "GeometrÃ­a 3D|OAC01","GeometrÃ­a 3D|OAC02","GeometrÃ­a 3D|OAC03","GeometrÃ­a 3D|OAC04","GeometrÃ­a 3D|OAC05"
    ]
  };

    function skillColor(skill) {
      switch(skill) {
        case 'argumentar': return '#F73EBE';
        case 'representar': return '#716FC9';
        case 'resolver': return '#F03E73';
        case 'modelar': return '#76CC5A';
        case 'digital': return '#B56D48';
        default: return '#000';
      }
    }
    function skillBgColor(skill) {
      switch(skill) {
        case 'argumentar': return '#ffd6f0';
        case 'representar': return '#e8e6ff';
        case 'resolver': return '#ffd6dc';
        case 'modelar': return '#e9f9e2';
        case 'digital': return '#f0e0cf';
        default: return '';
      }
    }

    let activeSkill = null;
    function highlightBySkill(skill) {
      clearSkillHighlights();
      activeSkill = skill;
      const allOAs = document.querySelectorAll('.oa');
      allOAs.forEach(el => {
        const uid = el.dataset.uid;
        if (skillsMap[skill] && skillsMap[skill].includes(uid)) {
          el.style.outline = `3px solid ${skillColor(skill)}`;
          el.style.backgroundColor = skillBgColor(skill);
        }
      });
    }
    function clearSkillHighlights() {
      activeSkill = null;
      const allOAs = document.querySelectorAll('.oa');
      allOAs.forEach(el => {
        el.style.outline = '';
        el.style.backgroundColor = '';
      });
    }

  
    function ensureContainersOpenForOAs(a, b) {
      [a.course, b.course].forEach(courseName => {
        const cont = document.querySelector(`.oas-container[data-curso="${courseName}"]`);
        if (cont && !cont.classList.contains('show')) cont.classList.add('show');
      });
    }

   
    function getGlobalRect(el) {
      const r = el.getBoundingClientRect();
      return { left: r.left + window.scrollX, top: r.top + window.scrollY, width: r.width, height: r.height };
    }
    function measureRects(els) {
      const map = new Map();
      els.forEach(el => map.set(el, getGlobalRect(el)));
      return map;
    }
    function playFLIP(beforeMap, els, duration = 550) {
      els.forEach(el => {
        const b = beforeMap.get(el);
        if (!b) return;
        const a = getGlobalRect(el);
        const dx = b.left - a.left;
        const dy = b.top  - a.top;
        if (Math.abs(dx) > 0 || Math.abs(dy) > 0) {
          el.style.transition = 'none';
          el.style.transform  = `translate(${dx}px, ${dy}px)`;
          void el.offsetWidth; // reflow
          el.style.transition = `transform ${duration}ms ease`;
          el.style.transform  = '';
          setTimeout(() => { el.style.transition = ''; }, duration + 60);
        }
      });
    }

  
    function swapDom(elA, elB) {
      const parentA = elA.parentNode;
      const parentB = elB.parentNode;
      const nextA = elA.nextSibling;
      const nextB = elB.nextSibling;
      const phA = document.createTextNode('');
      const phB = document.createTextNode('');
      parentA.insertBefore(phA, nextA);
      parentB.insertBefore(phB, nextB);
      parentA.replaceChild(elB, phA);
      parentB.replaceChild(elA, phB);
    }

   
    async function swapOAsAnimated(a, b) {
      const elA = findOAElement(a.course, a.oa);
      const elB = findOAElement(b.course, b.oa);
      if (!elA || !elB) {
        console.warn('No se encontrÃ³ alguno de los OAs a intercambiar:', a, b);
        return;
      }

      ensureContainersOpenForOAs(a, b);

  
      const impacted = new Set();
      [elA.parentNode, elB.parentNode].forEach(cont => {
        if (!cont) return;
        cont.querySelectorAll('.oa').forEach(oa => impacted.add(oa));
      });
      const impactedArr = Array.from(impacted);

   
      const before = measureRects(impactedArr);
     
      swapDom(elA, elB);
  
      playFLIP(before, impactedArr, 550);

      
      if (activeCategory) {
        setTimeout(drawActiveRelationships, 600);
      }
     
      if (activeSkill) {
        setTimeout(() => highlightBySkill(activeSkill), 620);
      }
      await new Promise(r => setTimeout(r, 700));
    }

   
    const intercambiosDemo = [
    
    ];

    async function aplicarIntercambios() {
      for (const par of intercambiosDemo) {
        await swapOAsAnimated(par.a, par.b);
      }
    }

  const movimientosDemo = [
    { oa: { course: "5Â° BÃ¡sico", oa: "OA 18" }, destino: "7Â° BÃ¡sico" },
    { oa: { course: "6Â° BÃ¡sico", oa: "OA 14" }, destino: "8Â° BÃ¡sico" },
    { oa: { course: "IÂ° Medio", oa: "OA 9" }, destino: "IIÂ° Medio" },
   
  ];


  function ensureContainerOpenByCourse(courseName) {
    const cont = document.querySelector(`.oas-container[data-curso="${courseName}"]`);
    if (cont && !cont.classList.contains('show')) cont.classList.add('show');
    return cont;
  }


  async function moverOAAnimated(origen, destinoCurso) {

    const elOA = findOAElement(origen.course, origen.oa);
    if (!elOA) {
      console.warn('No se encontrÃ³ OA a mover:', origen);
      return;
    }


    const contOrigen  = elOA.parentNode;
    const contDestino = ensureContainerOpenByCourse(destinoCurso);
    if (!contDestino) {
      console.warn('No se encontrÃ³ curso destino:', destinoCurso);
      return;
    }
  
    if (contOrigen && !contOrigen.classList.contains('show')) contOrigen.classList.add('show');

   
    const impacted = new Set();
    contOrigen.querySelectorAll('.oa').forEach(oa => impacted.add(oa));
    contDestino.querySelectorAll('.oa').forEach(oa => impacted.add(oa));
    impacted.add(elOA);
    const impactedArr = Array.from(impacted);
    const before = measureRects(impactedArr);
    contDestino.appendChild(elOA);
    playFLIP(before, impactedArr, 550);

   
    if (activeCategory) setTimeout(drawActiveRelationships, 600);
    if (activeSkill)    setTimeout(() => highlightBySkill(activeSkill), 620);

    await new Promise(r => setTimeout(r, 700));
  }
  async function aplicarMovimientos() {
    for (const mov of movimientosDemo) {
      await moverOAAnimated(mov.oa, mov.destino);
    }
  }

async function aplicarSecuencia() {
  
  for (const par of intercambiosDemo) {
    await swapOAsAnimated(par.a, par.b);
  }


  for (const mov of movimientosDemo) {
    await moverOAAnimated(mov.oa, mov.destino);
  }
}

    function toggleOAs(id) {
      const container = document.getElementById(id);
      container.classList.toggle('show');
      if (activeCategory) drawActiveRelationships();
    }
  </script>
</body>
</html>

